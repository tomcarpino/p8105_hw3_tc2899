---
title: "tc2899_hw3_rmd"
author: "Thomas Carpino, tc2899"
date: "October 13, 2018"
output: html_document
---

__## Problem 1: BRFSS__

Step 1: Import the dataset using the p8105 library: 

Importing: 
```{r setup}

#was running into CRAN errors so I added first two lines to alleviate problem 
chooseCRANmirror(graphics = FALSE, ind = 1)
knitr::opts_chunk$set(echo = TRUE)

install.packages("devtools", force = TRUE)

devtools::install_github("p8105/p8105.datasets")
devtools::install_github("thomasp85/patchwork")
library(p8105.datasets)
library(tidyverse)
library(ggplot2)
library(patchwork)
library(ggridges)
```

Step 2: Data Cleaning 

+ format the data to use appropriate variable names;
+ focus on the “Overall Health” topic
+ include only responses from “Excellent” to “Poor”

Data Cleaning: 
```{r cleaning}
brfss <- brfss_smart2010 %>%
  janitor::clean_names() %>%
  select(year, locationdesc, topic, response, data_value) %>%
  filter(topic == "Overall Health") %>% 
  select(-topic) %>%
  rename("Overall Health Response" = response) %>%
  rename("Overall Health Value" = data_value) %>%
  separate(locationdesc, into = c("state", "county"), sep = " - ") %>% 
  mutate(`Overall Health Response` = as.factor(`Overall Health Response`))  
```

*The organizing responses from "Excellent" to "Poor" not successful:*

```{r sorting}
# sort.brfss <- brfss %>% 
  # brfss[order('Overall Health Response')]
```

Step 3: Answering the Questions 

__In 2002, which states were observed at 7 locations?__

```{r locations}
brfss %>%
  filter(year == '2002') %>%
  group_by(state) %>%
  summarize(n = n_distinct(county)) %>%
  filter(n == 7)
```
In 2002, 3 states were observed in 7 counties, including CT, FL, and NC. 

__Make a “spaghetti plot” that shows the number of locations in each state from 2002 to 2010.__

```{r spaghetti}
brfss_plot = brfss %>%
  group_by(year, state) %>%
  summarize(number = n())

ggplot(data = brfss_plot, aes(x = year, y = number, color = state)) + geom_line() + labs(title = "Spaghetti Plot for Observations by State, 2002-2010")
```

__Make a table showing, for the years 2002, 2006, and 2010, the mean and standard deviation of the proportion of “Excellent” responses across locations in NY State.__

__For each year and state, compute the average proportion in each response category (taking the average across locations in a state). Make a five-panel plot that shows, for each response category separately, the distribution of these state-level averages over time__

# Problem 2

# Problem 3

## Including Plots

You can also embed plots, for example:

```{r pressure}
plot(pressure)
```
